<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="jp">
<head>
<title>
リバーシプログラムの作り方
</title>
</head>
<body background="../img/bg.gif" bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#0000ff" alink="#9900ff">
<a href="../index.html">＜目次＞</a>
<a href="3_1.html">＜前へ＞</a>
<a href="3_3.html">＜次へ＞</a>
<table width="600" border="0" cellpadding="3">
<tr bgcolor="#333399">
<td>
<font size=+1 color="#ffffff">
<b>3.2 パターンによる局面評価</b>
</font>
</td>
</tr>
</table>
<p>
局面を評価するには様々な方法があります。<br>
本解説では多くの強いプログラムで採用されているパターンに基づく評価について説明します。<br>
</p>
<ul>
<li><b>パターンに基づく評価</b><br>
<p>
パターンに基づく評価とは、局面からパターンを抽出し、各パターンの評価値の和をその局面の評価値とするものです。<br>
本解説で使用するパターンは以下のようになっています。<br>
各パターンでは黒い四角で印がついているマスを使用します。<br>
これらのパターンを採用している理由は以下の通りです。<br>
<ul>
<li>各パターンから、着手可能数、確定石等の局面評価には欠かせない要素を抽出することができる。<br>
実際には要素を抽出することはありませんが、重要な要素を含んでいるので精度の高い評価を期待できます。<br>
<li>パターンに含まれるマスの数が比較的少ない<br>
例えば辺のパターンだと、下図の"edge"にH1とG2を加えたパターンが提案されています。<br>
その場合にはパターンの評価値づけが大変になるので、より簡略なパターンを使用するようにしました。<br>
</ul>
またこれらのパターンとは別に、空きマスが偶数であるか奇数であるかも評価しています。<br>
</p>
<p>
<img src="../img/pattern.gif" width="480" height="400" alt="使用するパターン">
</p>
<li><b>パターン評価値の計算方法</b><br>
<p>
例として、"hor./ver.4"パターンの評価方法を説明します。<br>
このパターンでは、A4からH4までの連続する８マスを抽出します。<br>
このパターンは８個のマスを含み、各マスは３つの状態（黒、白、空き）を持つので、<br>
対称性を考慮しなければパターン全体では6561（３の８乗）の状態があります。<br>
各状態に対する評価値を6561個の配列として用意することで、パターンの評価を行うことができます。<br>
</p>
<p>
"hor./ver.4"パターンでは、これを90度回転、180度回転、270度回転させたパターンについても評価を行います。<br>
他のパターンの評価も同様に行います。<br>
</p>

<li><b>パターンに基づく評価の利点</b><br>
<p>
パターンに基づく評価の利点は、高速であることです。<br>
各パターンの状態（パターンインデックスと呼ぶことにします）は以下の式を使えば簡単に計算できます。<br>
ただしB[XX]はXXの状態に応じて以下を返すものとします。<br>
空き：0、黒：1、白：2<br>
</p>
<p>
例："hor./ver.4"パターンの計算式<br>
((((((B[A4]*3+B[B4])*3+B[C4])*3+B[D4])*3+B[E4])*3+B[F4])*3+B[G4])*3+B[H4]<br>
</p>
<li><b>パターンに基づく評価の難点</b><br>
<p>
パターンに基づく評価の難しいところは、各パターンの評価値を決定する点です。<br>
各パターンの状態数の和は数万になります。<br>
それらに対して１つ１つ評価値をつけるのは大変な作業です。<br>
この問題を解決するために各パターンの評価値づけを自動的に行う方法があるのですが、それについては後で述べます。<br>
</p>
</ul>
<a href="../index.html">＜目次＞</a>
<a href="3_1.html">＜前へ＞</a>
<a href="3_3.html">＜次へ＞</a>
<hr>
&copy;2006 Daiki Sanno, All Rights Reserved<br>
<a href="mailto:support@es-cube.net">mailto:support@es-cube.net</a><br>
</body>
</html>
